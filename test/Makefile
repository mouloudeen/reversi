# Variables
EXE = board_tests

# Usual compilation flags
CFLAGS = -std=c11 -Wall -Wextra -g -O2
CPPFLAGS = -I../include -DDEBUG

# Special rules and targets
.PHONY: all clean help

# Rules and targets
all: board_tests

board_tests: board_tests.o board.o
	$(CC) $(CFLAGS) -o $@ $^

board.o: ../src/board.c ../include/board.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $^

board_test.o: board_tests.c ../include/board.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $^

clean:
	@rm -f *~ *.o $(EXE)

help:
	@echo "Usage:"
	@echo " make [all]\t\tBuild the software"
	@echo " make clean\t\tRemove all files generated by make"
	@echo " make help\t\tDisplay this help"